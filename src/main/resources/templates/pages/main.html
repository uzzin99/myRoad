<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <th:block th:replace="~{fragments/header.html :: fragment-header}"></th:block>
</head>
<style>

</style>
<body class="g-sidenav-show bg-gray-100">
  <div class="min-height-300 bg-dark position-absolute w-100"></div>

  <!--aside-->
  <th:block th:replace="~{fragments/aside.html :: fragment-aside}"></th:block>
  <!--End aside-->

  <main class="main-content position-relative border-radius-lg">

    <!-- Navbar -->
    <th:block th:replace="~{fragments/nav.html :: fragment-nav}"></th:block>
    <!-- End Navbar -->

    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-12">
          <div class="card mb-4">
            <div class="card-header pb-0">
              <h6>캘린더</h6>
            </div>
            <div class="card-body pb-4">
              <div id='calendar'></div>

              <!-- 모달 폼 -->
<!--              <div id="eventModal">-->
<!--                <h3 id="myScheduleTitle">일정 추가</h3>-->
<!--                <input type="hidden" id="eventId" value="">-->
<!--                <input type="text" id="eventTitle" placeholder="제목 입력" />-->
<!--                <textarea id="eventDesc" rows="3" placeholder="내용 입력"></textarea>-->
<!--                <input type="date" id="eventStart" />-->
<!--                <input type="date" id="eventEnd" />-->
<!--                <button id="saveEventBtn">저장</button>-->
<!--                <button id="cancelEventBtn">취소</button>-->
<!--              </div>-->
              <!-- 모달 폼 -->

              <!-- Modal -->
              <div class="modal fade" id="eventModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalMessageTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="myScheduleTitle">일정추가</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <input type="hidden" id="eventId" value="">
                          <label for="eventTitle" class="col-form-label">제목</label>
                          <input type="text" class="form-control" value="" id="eventTitle">
                        </div>
                        <div class="form-group">
                          <label for="eventDesc" class="col-form-label">내용</label>
                          <textarea class="form-control" id="eventDesc"></textarea>
                        </div>
                        <div class="form-group">
                          <label for="eventStart" class="col-form-label">시작일</label>
                          <input class="form-control datepicker" placeholder="Please select date" type="text" onfocus="focused(this)" onfocusout="defocused(this)" id="eventStart">
                        </div>
                        <div class="form-group">
                          <label for="eventEnd" class="col-form-label">종료일</label>
                          <input class="form-control datepicker" placeholder="Please select date" type="text" onfocus="focused(this)" onfocusout="defocused(this)" id="eventEnd">
                        </div>

<!--                        <input type="date" id="eventStart" />-->
<!--                        <input type="date" id="eventEnd" />-->
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn bg-gradient-secondary" data-bs-dismiss="modal" id="cancelEventBtn">닫기</button>
                      <button type="button" class="btn bg-gradient-primary" id="saveEventBtn">저장</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- //Modal -->

            </div>
          </div>
        </div>
      </div>
      <!--footer-->
      <th:block th:replace="~{fragments/footer.html :: fragment-footer}"></th:block>
      <!--End footer-->
    </div>
  </main>
  <th:block th:replace="~{fragments/footer.html :: fragment-plugin}"></th:block>

  <th:block th:replace="~{fragments/scripts.html :: fragment-footer-scripts}"></th:block>
</body>
<script src="/js/calendar.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
<script>
  const fp = flatpickr(".datepicker", {
    dateFormat: "Y-m-d",
    locale: "ko",
    mode: "single", // 복수 선택 방지
    // input에 이미 값이 있으면 그 날짜로 calendar도 맞춘다
    defaultDate: document.querySelector(".datepicker").value || null,
    onOpen: (selectedDates, dateStr, instance) => {
      // 혹시 input 값이 바뀌어 있는데 캘린더가 안 따라오면 강제로 맞춘다
      if (instance.input.value) {
        //instance.clear();
        instance.setDate(instance.input.value, false);
      }
    }
  });
</script>
</html>